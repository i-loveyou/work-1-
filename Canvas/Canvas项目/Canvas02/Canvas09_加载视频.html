<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Canvas09_加载视频</title>
		<style type="text/css">
			#Canvas{
				display: block;
				margin: 0 auto;
				border: 1px solid tomato;
			}
		</style>
	</head>
	<body>
		<canvas id="Canvas" width="1000" height="500"></canvas>
		<video src="video/movie.mp4" style ="display:none"></video>
		<script type="text/javascript">
			/*
			 * Canvas在设置宽高时，建议设置其宽高的属性，而不要通过css样式设置宽高
			 */
			//1.获取canvas元素
			var canvas = document.getElementById("Canvas");
			
			//2.获取2d渲染上下文 	对象,该对象用于图像的绘制
			var content = canvas.getContext("2d");		
			
			//3.加载视频
			var video = document.querySelector("video");
			video.oncanplay = function(){
				video.play();
				
				videoAnimation();
			}
			function videoAnimation(){
				/*
				 * Canvas只能绘制图像，绘制视频的原理其实还是不断地绘制视频里每一帧的图像。在绘制当前帧图像时需要先清除上一帧的图像
				 */
//				setInterval(function(){
//					//先清空画布
//					content.clearRect(0,0,canvas.width,canvas.height);
//					//重新绘制图像
//					content.drawImage(video,0,0,canvas.width,canvas.height);
//				},16)
				
				content.clearRect(0,0,canvas.width,canvas.height);
				
				content.drawImage(video,0,0,canvas.width,canvas.height);
				
				window.requestAnimationFrame(videoAnimation);
			}
		</script>
	</body>
</html>
